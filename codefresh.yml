version: '1.0'
## develop
steps:
  build-example:
    type: build
    description: build yarn
    image-name: codefresh-io/node-yarn
    dockerfile: ./node_yarn/Dockerfile
    tag: latest

  test:
    image: node:latest
    working-directory: ${{initial-clone}}
    commands:
        - npm install -g mocha


  npm-install-test:
    image: node:latest
    working-directory: ${{initial-clone}}
    commands:
      - npm install
      - node ./works.js

  yarn-install-test:
    image: codefresh-io/node-yarn:latest
    working-directory: ${{initial-clone}}
    commands:
      - rm -r node_modules
      - npm install -g mocha
      - yarn install
      - mocha ./test/networks.spec.js
      - node ./works.js
